{% extends 'base/base.html' %}
{% load static %}

<!-- Define o título da página -->
{% block title %}Criar Evento{% endblock %}

<!-- Adiciona CSS extra para o formulário -->
{% block extra_css %}
<link rel="stylesheet" href="{% static 'styles/forms.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-3">Cadastrar Evento</h1>

    <!-- 
        Formulário para cadastro de eventos.
        - method="post": envia dados para o servidor via POST.
        - enctype="multipart/form-data": necessário para enviar arquivos (imagem thumb).
    -->
    <form method="post" enctype="multipart/form-data">

        <!-- 
            CSRF token:
            - CSRF = Cross-Site Request Forgery (falsificação de requisição entre sites)
            - Previne que um site malicioso envie formulários em nome do usuário sem permissão
            - Sempre necessário em formulários POST no Django
        -->
        {% csrf_token %}

        <!-- Campo Título do Evento -->
        <div class="mb-3">
            <label for="{{ form.titulo.id_for_label }}" class="form-label">Título</label>
            {{ form.titulo }}
            {% if form.titulo.errors %}
                <div class="text-danger small">{{ form.titulo.errors }}</div>
            {% endif %}
        </div>

        <!-- Campo Tipo de Evento -->
        <div class="mb-3">
            <label for="{{ form.tipo.id_for_label }}" class="form-label">Tipo</label>
            {{ form.tipo }}
            {% if form.tipo.errors %}
                <div class="text-danger small">{{ form.tipo.errors }}</div>
            {% endif %}
        </div>

        <!-- Campo Modalidade -->
        <div class="mb-3">
            <label for="{{ form.modalidade.id_for_label }}" class="form-label">Modalidade</label>
            {{ form.modalidade }}
            {% if form.modalidade.errors %}
                <div class="text-danger small">{{ form.modalidade.errors }}</div>
            {% endif %}
        </div>

        <!-- Datas do Evento -->
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="{{ form.data_inicio.id_for_label }}" class="form-label">Data Início</label>
                {{ form.data_inicio }}
                {% if form.data_inicio.errors %}
                    <div class="text-danger small">{{ form.data_inicio.errors }}</div>
                {% endif %}
            </div>
            <div class="col-md-6 mb-3">
                <label for="{{ form.data_fim.id_for_label }}" class="form-label">Data Fim</label>
                {{ form.data_fim }}
                {% if form.data_fim.errors %}
                    <div class="text-danger small">{{ form.data_fim.errors }}</div>
                {% endif %}
            </div>
        </div>

        <!-- Horário -->
        <div class="mb-3">
            <label for="{{ form.horario.id_for_label }}" class="form-label">Horário</label>
            {{ form.horario }}
            {% if form.horario.errors %}
                <div class="text-danger small">{{ form.horario.errors }}</div>
            {% endif %}
        </div>

        <!-- Local (opcional) -->
        <div class="mb-3">
            <label for="{{ form.local.id_for_label }}" class="form-label">Local (opcional)</label>
            {{ form.local }}
            {% if form.local.errors %}
                <div class="text-danger small">{{ form.local.errors }}</div>
            {% endif %}
        </div>

        <!-- Link (opcional) -->
        <div class="mb-3">
            <label for="{{ form.link.id_for_label }}" class="form-label">Link (opcional)</label>
            {{ form.link }}
            {% if form.link.errors %}
                <div class="text-danger small">{{ form.link.errors }}</div>
            {% endif %}
        </div>

        <!-- Quantidade de participantes e opção "Sem limites" -->
        <div class="row align-items-end">
            <div class="col-md-6 mb-3">
                <label for="{{ form.quantidade_participantes.id_for_label }}" class="form-label">Quantidade de Participantes</label>
                {{ form.quantidade_participantes }}
                {% if form.quantidade_participantes.errors %}
                    <div class="text-danger small">{{ form.quantidade_participantes.errors }}</div>
                {% endif %}
            </div>
            <div class="col-md-6 mb-3">
                <div class="form-check">
                    {{ form.sem_limites }}
                    <label class="form-check-label">Sem limites de inscrição</label>
                </div>
            </div>
        </div>

        <!-- Campos adicionais adicionados: Descrição, Imagem e Horas -->

        <!-- Descrição do evento -->
        <div class="mb-3">
            <label for="{{ form.descricao.id_for_label }}" class="form-label">Descrição (opcional)</label>
            {{ form.descricao }}
            {% if form.descricao.errors %}
                <div class="text-danger small">{{ form.descricao.errors }}</div>
            {% endif %}
        </div>
        
        <!-- Duração em horas -->
        <div class="mb-3">
            <label for="{{ form.horas.id_for_label }}" class="form-label">Carga (horas)</label>
            {{ form.horas }}
            {% if form.horas.errors %}
                <div class="text-danger small">{{ form.horas.errors }}</div>
            {% endif %}
        </div>
        
        <!-- Upload da imagem (Thumb) -->
        <div class="mb-3">
            <label for="{{ form.thumb.id_for_label }}" class="form-label">Imagem do Evento (opcional)</label>
            {{ form.thumb }}
            {% if form.thumb.errors %}
                <div class="text-danger small">{{ form.thumb.errors }}</div>
            {% endif %}
        </div>

        <!-- Botão de envio do formulário -->
        <button type="submit" class="btn btn-primary">Cadastrar Evento</button>
    </form>
</div>
{% endblock %}
