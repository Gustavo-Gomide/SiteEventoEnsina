{% extends 'base/base.html' %}
{% load static %}

{% block title %}Cadastro{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'styles/forms.css' %}">
{% endblock %}

{% block content %}
<div class="form-container">
    <h1>Cadastro de Usuário</h1>

    <form method="post">
        {% csrf_token %}

        <!-- Nome -->
        <p>
            {% if form.nome.errors %}
                <div class="field-error">
                    <strong>Erro:</strong>
                    <ul>
                        {% for e in form.nome.errors %}
                            <li>{{ e }}</li>
                        {% endfor %}
                    </ul>
                    <div class="field-example">Exemplo: João da Silva</div>
                </div>
            {% endif %}
            <label for="{{ form.nome.id_for_label }}">Nome</label>
            {{ form.nome }}
        </p>

        <!-- Telefone (DDD + número) -->
        <p>
            {% if form.telefone.errors %}
                <div class="field-error">
                    <strong>Erro:</strong>
                    <ul>
                        {% for e in form.telefone.errors %}
                            <li>{{ e }}</li>
                        {% endfor %}
                    </ul>
                    <div class="field-example">Exemplo: (11) 99613-5479</div>
                </div>
            {% endif %}
            <label for="{{ form.telefone.id_for_label }}">Telefone (DDD + número)</label>
            {{ form.telefone }}
        </p>

        <!-- Resto do formulário permanece igual -->
        <!-- Tipo de usuário -->
        <p>
            {% if form.tipo.errors %}
                <div class="field-error">
                    <strong>Erro:</strong>
                    <ul>
                        {% for e in form.tipo.errors %}
                            <li>{{ e }}</li>
                        {% endfor %}
                    </ul>
                    <div class="field-example">Exemplo: Aluno</div>
                </div>
            {% endif %}
            <label for="{{ form.tipo.id_for_label }}">Tipo</label>
            {{ form.tipo }}
        </p>

        <!-- Instituição -->
        <p>
            {% if form.instituicao.errors %}
                <div class="field-error">
                    <strong>Erro:</strong>
                    <ul>
                        {% for e in form.instituicao.errors %}
                            <li>{{ e }}</li>
                        {% endfor %}
                    </ul>
                    <div class="field-example">Exemplo: Universidade Exemplo</div>
                </div>
            {% endif %}
            <label for="{{ form.instituicao.id_for_label }}">Instituição</label>
            {{ form.instituicao }}
        </p>

        <!-- Nome de usuário -->
        <p>
            {% if form.nome_usuario.errors %}
                <div class="field-error">
                    <strong>Erro:</strong>
                    <ul>
                        {% for e in form.nome_usuario.errors %}
                            <li>{{ e }}</li>
                        {% endfor %}
                    </ul>
                    <div class="field-example">Exemplo: exemplo_usuario</div>
                </div>
            {% endif %}
            <label for="{{ form.nome_usuario.id_for_label }}">Usuário</label>
            {{ form.nome_usuario }}
        </p>

        <!-- E-mail -->
        <p>
            {% if form.email.errors %}
                <div class="field-error">
                    <strong>Erro:</strong>
                    <ul>
                        {% for e in form.email.errors %}
                            <li>{{ e }}</li>
                        {% endfor %}
                    </ul>
                    <div class="field-example">Exemplo: voce@exemplo.com</div>
                </div>
            {% endif %}
            <label for="{{ form.email.id_for_label }}">E-mail</label>
            {{ form.email }}
        </p>

        <!-- Senha com toggle -->
        <p class="senha-container">
            <label for="{{ form.senha.id_for_label }}">Senha</label>
            {{ form.senha }}
            <button type="button" id="toggleSenha" title="Mostrar/ocultar senha">
                <svg id="iconShow" class="active" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5m0 11a3.5 3.5 0 1 1 0-7a3.5 3.5 0 0 1 0 7"/>
                </svg>
                <svg id="iconHide" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M12 6a9.77 9.77 0 0 1 9 6a9.6 9.6 0 0 1-1.72 2.82l1.42 1.42A11.85 11.85 0 0 0 23 12a11.77 11.77 0 0 0-11-7a11.43 11.43 0 0 0-3.93.73l1.53 1.53A9.43 9.43 0 0 1 12 6m-9.9.68l2.23 2.23A11.66 11.66 0 0 0 1 12a11.85 11.85 0 0 0 11 7a11.43 11.43 0 0 0 3.93-.73l2.3 2.3l1.27-1.27L4.37 5.41zm9.9 11.82A9.77 9.77 0 0 1 3 12a9.6 9.6 0 0 1 1.72-2.82l1.47 1.47a7.5 7.5 0 0 0 9.12 9.12l1.47 1.47A11.43 11.43 0 0 1 12 18.5M9 12a3 3 0 0 1 3-3a3 3 0 0 1 2.82 2.1L9.9 15a3 3 0 0 1-.9-3"/>
                </svg>
            </button>
            {% if form.senha.errors %}
                <span class="erro">{{ form.senha.errors }}</span>
            {% endif %}
        </p>

        <button type="submit">Cadastrar</button>
    </form>

    <p class="cadastro-link">
        Já tem cadastro? <a href="{% url 'login' %}">Login</a>
    </p>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'scripts/senha.js' %}"></script>
<script src="{% static 'scripts/telefone_mask.js' %}"></script>
{% endblock %}